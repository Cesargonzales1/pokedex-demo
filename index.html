<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokÃ©dex</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23ff0000'/><circle cx='50' cy='50' r='35' fill='white'/><circle cx='50' cy='50' r='15' fill='%23333'/><rect x='0' y='45' width='100' height='10' fill='%23333'/></svg>">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PokÃ©dex">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23ff0000'/><circle cx='50' cy='50' r='35' fill='white'/><circle cx='50' cy='50' r='15' fill='%23333'/><rect x='0' y='45' width='100' height='10' fill='%23333'/></svg>">

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen active">
        <div class="splash-content">
            <div class="pokeball-splash">
                <div class="pokeball-top"></div>
                <div class="pokeball-middle"></div>
                <div class="pokeball-bottom"></div>
                <div class="pokeball-button"></div>
            </div>
            <h1 class="splash-title">PokÃ©dex</h1>
            <p class="splash-subtitle">Cargando...</p>
        </div>
    </div>

    <!-- YouTube Music (Invisible) -->
    <div id="backgroundMusic" style="display: none;"></div>

    <!-- Music Control Button -->
    <button id="musicToggle" class="music-toggle" title="MÃºsica On/Off">
        ğŸµ
    </button>

    <!-- Games Menu Button -->
    <button id="gamesMenuToggle" class="games-menu-toggle" title="Juegos">
        ğŸ®
    </button>

    <div class="container">
        <header>
            <h1>ğŸ”´ PokÃ©dex ğŸ”µ</h1>
            <p class="subtitle">Descubre informaciÃ³n de tus PokÃ©mon favoritos</p>
        </header>

        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Buscar PokÃ©mon por nombre o nÃºmero..." />
            <button id="searchBtn">Buscar</button>
        </div>

        <div class="filter-container">
            <div class="filter-group">
                <label for="generationFilter">GeneraciÃ³n:</label>
                <select id="generationFilter">
                    <option value="all">Todas (1-1025)</option>
                    <option value="1" selected>Gen I - Kanto (1-151)</option>
                    <option value="2">Gen II - Johto (152-251)</option>
                    <option value="3">Gen III - Hoenn (252-386)</option>
                    <option value="4">Gen IV - Sinnoh (387-493)</option>
                    <option value="5">Gen V - Unova (494-649)</option>
                    <option value="6">Gen VI - Kalos (650-721)</option>
                    <option value="7">Gen VII - Alola (722-809)</option>
                    <option value="8">Gen VIII - Galar (810-905)</option>
                    <option value="9">Gen IX - Paldea (906-1025)</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="typeFilter">Filtrar por tipo:</label>
                <select id="typeFilter">
                    <option value="">Todos los tipos</option>
                    <option value="normal">Normal</option>
                    <option value="fire">Fuego</option>
                    <option value="water">Agua</option>
                    <option value="grass">Planta</option>
                    <option value="electric">ElÃ©ctrico</option>
                    <option value="ice">Hielo</option>
                    <option value="fighting">Lucha</option>
                    <option value="poison">Veneno</option>
                    <option value="ground">Tierra</option>
                    <option value="flying">Volador</option>
                    <option value="psychic">PsÃ­quico</option>
                    <option value="bug">Bicho</option>
                    <option value="rock">Roca</option>
                    <option value="ghost">Fantasma</option>
                    <option value="dragon">DragÃ³n</option>
                    <option value="dark">Siniestro</option>
                    <option value="steel">Acero</option>
                    <option value="fairy">Hada</option>
                </select>
            </div>
        </div>

        <div class="gigamax-button-container">
            <button id="gigamaxBtn" class="gigamax-btn">
                âš¡ Ver PokÃ©mon Gigamax âš¡
            </button>
        </div>

        <div class="loading" id="loading">
            <div class="pokeball-loader"></div>
            <p>Cargando PokÃ©mon...</p>
        </div>

        <div id="pokemonContainer" class="pokemon-grid"></div>

        <div class="pagination">
            <button id="prevBtn" disabled>â† Anterior</button>
            <span id="pageInfo">PÃ¡gina 1</span>
            <button id="nextBtn">Siguiente â†’</button>
        </div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Games Menu Modal -->
    <div id="gamesMenuModal" class="games-menu-modal">
        <div class="games-menu-content">
            <span class="games-menu-close">&times;</span>
            <h2 class="games-menu-title">ğŸ® Selecciona un Juego</h2>

            <div class="games-grid">
                <!-- Memory Game Card -->
                <div class="game-card" data-game="memory">
                    <div class="game-card-icon">ğŸ§ </div>
                    <h3>Memoria PokÃ©mon</h3>
                    <p>Encuentra los pares de PokÃ©mon</p>
                </div>

                <!-- Dugtrio Game Card -->
                <div class="game-card" data-game="dugtrio">
                    <div class="game-card-icon">ğŸ”¨</div>
                    <h3>Â¡Golpea a DugtrÃ­o!</h3>
                    <p>Whac-A-Mole con DugtrÃ­o</p>
                </div>

                <!-- Who's That Pokemon Game Card -->
                <div class="game-card" data-game="guess">
                    <div class="game-card-icon">â“</div>
                    <h3>Â¿QuiÃ©n es ese PokÃ©mon?</h3>
                    <p>Adivina por la silueta</p>
                </div>

                <!-- Fishing Game Card -->
                <div class="game-card" data-game="fishing">
                    <div class="game-card-icon">ğŸ£</div>
                    <h3>Pesca PokÃ©mon</h3>
                    <p>Captura PokÃ©mon acuÃ¡ticos</p>
                </div>

                <!-- Runner Game Card -->
                <div class="game-card" data-game="runner">
                    <div class="game-card-icon">âš¡</div>
                    <h3>Pikachu Runner</h3>
                    <p>Esquiva obstÃ¡culos</p>
                </div>

                <!-- Puzzle Game Card -->
                <div class="game-card" data-game="puzzle">
                    <div class="game-card-icon">ğŸ§©</div>
                    <h3>Puzzle PokÃ©mon</h3>
                    <p>Resuelve el rompecabezas</p>
                </div>

                <!-- Battle Game Card -->
                <div class="game-card" data-game="battle">
                    <div class="game-card-icon">âš”ï¸</div>
                    <h3>Batalla PokÃ©mon</h3>
                    <p>Combate por turnos</p>
                </div>

                <!-- Tower Defense Game Card -->
                <div class="game-card" data-game="towerdefense">
                    <div class="game-card-icon">ğŸ—¼</div>
                    <h3>Tower Defense</h3>
                    <p>Defiende el camino</p>
                </div>

                <!-- Math Evolution Game Card -->
                <div class="game-card" data-game="mathevo">
                    <div class="game-card-icon">ğŸ§®</div>
                    <h3>EvoluciÃ³n MatemÃ¡tica</h3>
                    <p>Resuelve y evoluciona</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Memory Game Modal -->
    <div id="gameModal" class="game-modal">
        <div class="game-modal-content">
            <span class="game-close">&times;</span>
            <h2 class="game-title">ğŸ® Juego de Memoria PokÃ©mon</h2>

            <div id="gameMenu" class="game-menu">
                <p class="game-instructions">Â¡Encuentra todas las parejas de PokÃ©mon!</p>
                <div class="difficulty-selector">
                    <button class="difficulty-btn" data-level="easy">
                        ğŸŸ¢ FÃ¡cil<br><span>12 tarjetas</span>
                    </button>
                    <button class="difficulty-btn" data-level="medium">
                        ğŸŸ¡ Medio<br><span>16 tarjetas</span>
                    </button>
                </div>
            </div>

            <div id="gameBoard" class="game-board-container" style="display: none;">
                <div class="game-stats">
                    <div class="stat-item">
                        <span class="stat-label">â±ï¸ Tiempo:</span>
                        <span id="gameTimer" class="stat-value">0:00</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ğŸ”¢ Movimientos:</span>
                        <span id="gameMoves" class="stat-value">0</span>
                    </div>
                    <button id="resetGame" class="reset-btn">ğŸ”„ Reiniciar</button>
                </div>
                <div id="cardsGrid" class="cards-grid"></div>
            </div>

            <div id="victoryScreen" class="victory-screen" style="display: none;">
                <h2 class="victory-title">ğŸ‰ Â¡Felicidades!</h2>
                <p class="victory-message">Â¡Has encontrado todas las parejas!</p>
                <div class="victory-stats">
                    <p>â±ï¸ Tiempo: <span id="victoryTime"></span></p>
                    <p>ğŸ”¢ Movimientos: <span id="victoryMoves"></span></p>
                </div>
                <button id="playAgain" class="play-again-btn">ğŸ® Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Dugtrio Whac-A-Mole Game Modal -->
    <div id="dugtrioModal" class="dugtrio-modal">
        <div class="dugtrio-modal-content">
            <span class="dugtrio-close">&times;</span>
            <h2 class="dugtrio-title">ğŸ”¨ Â¡Golpea a DugtrÃ­o!</h2>

            <!-- Game Menu -->
            <div id="dugtrioMenu" class="dugtrio-menu">
                <p class="dugtrio-instructions">
                    Â¡DugtrÃ­o estÃ¡ saliendo de sus agujeros! Haz clic en ellos antes de que se escondan.
                    <br><br>
                    ğŸ¯ +10 puntos por cada DugtrÃ­o golpeado
                    <br>
                    â±ï¸ Tienes 30 segundos
                </p>
                <button id="startDugtrio" class="start-dugtrio-btn">ğŸ”¨ Â¡Empezar!</button>
            </div>

            <!-- Game Board -->
            <div id="dugtrioGameBoard" class="dugtrio-game-board" style="display: none;">
                <!-- Game Stats -->
                <div class="dugtrio-stats">
                    <div class="dugtrio-stat-item">
                        <span class="dugtrio-stat-label">â±ï¸ Tiempo</span>
                        <span id="dugtrioTime" class="dugtrio-stat-value">30</span>
                    </div>
                    <div class="dugtrio-stat-item">
                        <span class="dugtrio-stat-label">ğŸ¯ Puntos</span>
                        <span id="dugtrioScore" class="dugtrio-stat-value">0</span>
                    </div>
                </div>

                <!-- Holes Grid -->
                <div class="holes-grid">
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="0">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="1">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="2">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="3">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="4">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="5">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="6">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="7">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                    <div class="hole-container">
                        <div class="hole"></div>
                        <div class="dugtrio" data-hole="8">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/51.png" alt="DugtrÃ­o">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Victory Screen -->
            <div id="dugtrioVictory" class="dugtrio-victory" style="display: none;">
                <h3 class="dugtrio-victory-title">ğŸ† Â¡Juego Terminado!</h3>
                <p class="dugtrio-victory-message">Â¡Buen trabajo golpeando a DugtrÃ­o!</p>
                <div class="dugtrio-victory-stats">
                    <p>ğŸ¯ PuntuaciÃ³n Final: <span id="dugtrioFinalScore"></span> puntos</p>
                    <p>ğŸ”¨ DugtrÃ­o golpeados: <span id="dugtrioHits"></span></p>
                </div>
                <button id="dugtrioPlayAgain" class="dugtrio-play-again-btn">ğŸ”¨ Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Guess Pokemon Game Modal -->
    <div id="guessModal" class="guess-modal">
        <div class="guess-modal-content">
            <span class="guess-close">&times;</span>
            <h2 class="guess-title">â“ Â¿QuiÃ©n es ese PokÃ©mon?</h2>

            <!-- Game Menu -->
            <div id="guessMenu" class="guess-menu">
                <p class="guess-instructions">
                    Â¡Observa la silueta y adivina quÃ© PokÃ©mon es!
                    <br><br>
                    âš¡ +100 puntos por respuesta correcta
                    <br>
                    â±ï¸ BonificaciÃ³n por velocidad
                </p>
                <button id="startGuess" class="start-guess-btn">â–¶ï¸ Â¡Empezar!</button>
            </div>

            <!-- Game Board -->
            <div id="guessGameBoard" class="guess-game-board" style="display: none;">
                <!-- Game Stats -->
                <div class="guess-stats">
                    <div class="guess-stat-item">
                        <span class="guess-stat-label">ğŸ¯ Puntos</span>
                        <span id="guessScore" class="guess-stat-value">0</span>
                    </div>
                    <div class="guess-stat-item">
                        <span class="guess-stat-label">â“ Pregunta</span>
                        <span id="guessQuestion" class="guess-stat-value">1/10</span>
                    </div>
                    <div class="guess-stat-item">
                        <span class="guess-stat-label">â±ï¸ Tiempo</span>
                        <span id="guessTime" class="guess-stat-value">10</span>
                    </div>
                </div>

                <!-- Pokemon Silhouette -->
                <div class="silhouette-container">
                    <img id="guessPokemonImg" src="" alt="Pokemon" class="pokemon-silhouette">
                </div>

                <!-- Options -->
                <div class="guess-options">
                    <button class="guess-option-btn" data-option="0"></button>
                    <button class="guess-option-btn" data-option="1"></button>
                    <button class="guess-option-btn" data-option="2"></button>
                    <button class="guess-option-btn" data-option="3"></button>
                </div>
            </div>

            <!-- Victory Screen -->
            <div id="guessVictory" class="guess-victory" style="display: none;">
                <h3 class="guess-victory-title">ğŸ† Â¡Juego Terminado!</h3>
                <div class="guess-victory-stats">
                    <p>ğŸ¯ PuntuaciÃ³n Final: <span id="guessFinalScore"></span> puntos</p>
                    <p>âœ… Respuestas Correctas: <span id="guessCorrect"></span>/10</p>
                    <p>âš¡ PrecisiÃ³n: <span id="guessAccuracy"></span>%</p>
                </div>
                <button id="guessPlayAgain" class="guess-play-again-btn">ğŸ”„ Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Fishing Pokemon Game Modal -->
    <div id="fishingModal" class="fishing-modal">
        <div class="fishing-modal-content">
            <span class="fishing-close">&times;</span>
            <h2 class="fishing-title">ğŸ£ Pesca PokÃ©mon</h2>

            <!-- Game Menu -->
            <div id="fishingMenu" class="fishing-menu">
                <p class="fishing-instructions">
                    Â¡PokÃ©mon acuÃ¡ticos estÃ¡n nadando! Presiona el botÃ³n en el momento correcto para pescarlos.
                    <br><br>
                    ğŸŸ Diferentes PokÃ©mon valen diferentes puntos
                    <br>
                    â±ï¸ Tienes 60 segundos
                </p>
                <button id="startFishing" class="start-fishing-btn">ğŸ£ Â¡Empezar a Pescar!</button>
            </div>

            <!-- Game Board -->
            <div id="fishingGameBoard" class="fishing-game-board" style="display: none;">
                <!-- Game Stats -->
                <div class="fishing-stats">
                    <div class="fishing-stat-item">
                        <span class="fishing-stat-label">â±ï¸ Tiempo</span>
                        <span id="fishingTime" class="fishing-stat-value">60</span>
                    </div>
                    <div class="fishing-stat-item">
                        <span class="fishing-stat-label">ğŸ¯ Puntos</span>
                        <span id="fishingScore" class="fishing-stat-value">0</span>
                    </div>
                    <div class="fishing-stat-item">
                        <span class="fishing-stat-label">ğŸŸ Pescados</span>
                        <span id="fishingCatches" class="fishing-stat-value">0</span>
                    </div>
                </div>

                <!-- Fishing Area -->
                <div class="fishing-area">
                    <div class="water-surface"></div>
                    <div class="pokemon-container" id="fishingPokemonContainer"></div>
                    <div class="fishing-rod" id="fishingRod">
                        <div class="rod-line"></div>
                        <div class="rod-hook">ğŸª</div>
                    </div>
                </div>

                <!-- Catch Button -->
                <button id="catchBtn" class="catch-btn">ğŸ£ Â¡LANZAR CAÃ‘A!</button>
            </div>

            <!-- Victory Screen -->
            <div id="fishingVictory" class="fishing-victory" style="display: none;">
                <h3 class="fishing-victory-title">ğŸ† Â¡Fin de la Pesca!</h3>
                <div class="fishing-victory-stats">
                    <p>ğŸ¯ PuntuaciÃ³n Final: <span id="fishingFinalScore"></span> puntos</p>
                    <p>ğŸŸ Total Pescados: <span id="fishingTotalCatches"></span></p>
                    <p>ğŸ£ PrecisiÃ³n: <span id="fishingAccuracy"></span>%</p>
                </div>
                <button id="fishingPlayAgain" class="fishing-play-again-btn">ğŸ”„ Pescar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Pikachu Runner Game Modal -->
    <div id="runnerModal" class="runner-modal">
        <div class="runner-modal-content">
            <span class="runner-close">&times;</span>
            <h2 class="runner-title">âš¡ Pikachu Runner</h2>

            <!-- Game Menu -->
            <div id="runnerMenu" class="runner-menu">
                <p class="runner-instructions">
                    Â¡Ayuda a Pikachu a correr y saltar obstÃ¡culos!
                    <br><br>
                    âš¡ Presiona ESPACIO o haz CLICK para saltar
                    <br>
                    ğŸƒ La velocidad aumenta con el tiempo
                </p>
                <button id="startRunner" class="start-runner-btn">âš¡ Â¡Empezar a Correr!</button>
            </div>

            <!-- Game Board -->
            <div id="runnerGameBoard" class="runner-game-board" style="display: none;">
                <!-- Game Stats -->
                <div class="runner-stats">
                    <div class="runner-stat-item">
                        <span class="runner-stat-label">ğŸƒ Distancia</span>
                        <span id="runnerDistance" class="runner-stat-value">0m</span>
                    </div>
                    <div class="runner-stat-item">
                        <span class="runner-stat-label">ğŸ¯ Puntos</span>
                        <span id="runnerScore" class="runner-stat-value">0</span>
                    </div>
                </div>

                <!-- Game Canvas -->
                <div class="runner-game-container">
                    <div id="pikachu" class="pikachu"></div>
                    <div id="obstaclesContainer" class="obstacles-container"></div>
                    <div class="runner-ground"></div>
                </div>

                <!-- Jump Button for Mobile -->
                <button id="jumpBtn" class="jump-btn">â¬†ï¸ SALTAR</button>
            </div>

            <!-- Victory Screen -->
            <div id="runnerVictory" class="runner-victory" style="display: none;">
                <h3 class="runner-victory-title">ğŸ’¥ Â¡Game Over!</h3>
                <div class="runner-victory-stats">
                    <p>ğŸƒ Distancia Recorrida: <span id="runnerFinalDistance"></span>m</p>
                    <p>ğŸ¯ PuntuaciÃ³n Final: <span id="runnerFinalScore"></span></p>
                    <p>âš¡ Velocidad MÃ¡xima: <span id="runnerMaxSpeed"></span></p>
                </div>
                <button id="runnerPlayAgain" class="runner-play-again-btn">ğŸ”„ Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Puzzle Pokemon Game Modal -->
    <div id="puzzleModal" class="puzzle-modal">
        <div class="puzzle-modal-content">
            <span class="puzzle-close">&times;</span>
            <h2 class="puzzle-title">ğŸ§© Puzzle PokÃ©mon</h2>

            <!-- Game Menu -->
            <div id="puzzleMenu" class="puzzle-menu">
                <p class="puzzle-instructions">
                    Â¡Reorganiza las piezas para formar la imagen del PokÃ©mon!
                    <br><br>
                    ğŸ§© Haz click en las piezas adyacentes al espacio vacÃ­o
                </p>
                <div class="puzzle-difficulty-selector">
                    <button class="puzzle-difficulty-btn" data-size="3">
                        FÃ¡cil
                        <span>3x3 (8 piezas)</span>
                    </button>
                    <button class="puzzle-difficulty-btn" data-size="4">
                        Medio
                        <span>4x4 (15 piezas)</span>
                    </button>
                    <button class="puzzle-difficulty-btn" data-size="5">
                        DifÃ­cil
                        <span>5x5 (24 piezas)</span>
                    </button>
                </div>
            </div>

            <!-- Game Board -->
            <div id="puzzleGameBoard" class="puzzle-game-board" style="display: none;">
                <!-- Game Stats -->
                <div class="puzzle-stats">
                    <div class="puzzle-stat-item">
                        <span class="puzzle-stat-label">â±ï¸ Tiempo</span>
                        <span id="puzzleTime" class="puzzle-stat-value">0:00</span>
                    </div>
                    <div class="puzzle-stat-item">
                        <span class="puzzle-stat-label">ğŸ”¢ Movimientos</span>
                        <span id="puzzleMoves" class="puzzle-stat-value">0</span>
                    </div>
                </div>

                <!-- Puzzle Grid -->
                <div id="puzzleGrid" class="puzzle-grid"></div>

                <!-- Controls -->
                <div class="puzzle-controls">
                    <button id="puzzleResetBtn" class="puzzle-reset-btn">ğŸ”„ Reiniciar</button>
                    <button id="puzzleNewGameBtn" class="puzzle-new-game-btn">ğŸ² Nuevo PokÃ©mon</button>
                </div>
            </div>

            <!-- Victory Screen -->
            <div id="puzzleVictory" class="puzzle-victory" style="display: none;">
                <h3 class="puzzle-victory-title">ğŸ‰ Â¡Puzzle Completado!</h3>
                <div class="puzzle-victory-image" id="puzzleVictoryImage"></div>
                <div class="puzzle-victory-stats">
                    <p>â±ï¸ Tiempo: <span id="puzzleFinalTime"></span></p>
                    <p>ğŸ”¢ Movimientos: <span id="puzzleFinalMoves"></span></p>
                    <p>ğŸ§© Dificultad: <span id="puzzleFinalDifficulty"></span></p>
                </div>
                <button id="puzzlePlayAgain" class="puzzle-play-again-btn">ğŸ”„ Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Battle Game Modal -->
    <div id="battleModal" class="battle-modal">
        <div class="battle-modal-content">
            <span class="battle-close">&times;</span>
            <h2 class="battle-title">âš”ï¸ Batalla PokÃ©mon</h2>

            <!-- Team Selection Screen -->
            <div id="battleTeamSelection" class="battle-team-selection">
                <p class="battle-instructions">Â¡Selecciona 3 PokÃ©mon para tu equipo!</p>
                <div id="battlePokemonGrid" class="battle-pokemon-grid"></div>
                <div class="battle-selected-team">
                    <h3>Tu Equipo (<span id="battleTeamCount">0</span>/3)</h3>
                    <div id="battleSelectedPokemon" class="battle-selected-pokemon"></div>
                </div>
                <button id="startBattle" class="start-battle-btn" disabled>âš”ï¸ Â¡Comenzar Batalla!</button>
            </div>

            <!-- Battle Screen -->
            <div id="battleGameBoard" class="battle-game-board" style="display: none;">
                <!-- Battle Field -->
                <div class="battle-field">
                    <!-- Enemy Pokemon -->
                    <div class="battle-pokemon enemy-pokemon">
                        <div class="pokemon-info">
                            <div class="pokemon-name-level">
                                <span id="enemyPokemonName" class="pokemon-name-text">---</span>
                                <span class="pokemon-level">Nv. <span id="enemyPokemonLevel">5</span></span>
                            </div>
                            <div class="hp-bar-container">
                                <div class="hp-bar-bg">
                                    <div id="enemyHPBar" class="hp-bar"></div>
                                </div>
                                <div class="hp-text">
                                    <span id="enemyHP">0</span>/<span id="enemyMaxHP">0</span>
                                </div>
                            </div>
                        </div>
                        <div class="pokemon-sprite-container">
                            <img id="enemyPokemonSprite" src="" alt="Enemy Pokemon" class="pokemon-battle-sprite">
                        </div>
                    </div>

                    <!-- Player Pokemon -->
                    <div class="battle-pokemon player-pokemon">
                        <div class="pokemon-sprite-container">
                            <img id="playerPokemonSprite" src="" alt="Player Pokemon" class="pokemon-battle-sprite">
                        </div>
                        <div class="pokemon-info">
                            <div class="pokemon-name-level">
                                <span id="playerPokemonName" class="pokemon-name-text">---</span>
                                <span class="pokemon-level">Nv. <span id="playerPokemonLevel">5</span></span>
                            </div>
                            <div class="hp-bar-container">
                                <div class="hp-bar-bg">
                                    <div id="playerHPBar" class="hp-bar"></div>
                                </div>
                                <div class="hp-text">
                                    <span id="playerHP">0</span>/<span id="playerMaxHP">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Battle Log -->
                <div id="battleLog" class="battle-log"></div>

                <!-- Battle Actions -->
                <div id="battleActions" class="battle-actions">
                    <button class="battle-action-btn" id="attackBtn">âš”ï¸ ATACAR</button>
                    <button class="battle-action-btn" id="switchBtn">ğŸ”„ CAMBIAR</button>
                </div>

                <!-- Attack Menu -->
                <div id="attackMenu" class="attack-menu" style="display: none;">
                    <div class="attack-grid" id="attackGrid"></div>
                    <button class="back-btn" id="backToActions">â† AtrÃ¡s</button>
                </div>

                <!-- Switch Menu -->
                <div id="switchMenu" class="switch-menu" style="display: none;">
                    <div class="switch-grid" id="switchGrid"></div>
                    <button class="back-btn" id="backToActionsSwitch">â† AtrÃ¡s</button>
                </div>
            </div>

            <!-- Victory Screen -->
            <div id="battleVictory" class="battle-victory" style="display: none;">
                <h3 class="battle-victory-title">ğŸ† Â¡VICTORIA!</h3>
                <p class="battle-victory-message">Â¡Has derrotado a todos los PokÃ©mon enemigos!</p>
                <div class="battle-victory-stats">
                    <p>âš”ï¸ Batallas ganadas: <span id="battlesWon"></span></p>
                    <p>ğŸ’š PokÃ©mon restantes: <span id="pokemonRemaining"></span></p>
                </div>
                <button id="battlePlayAgain" class="battle-play-again-btn">ğŸ”„ Jugar de Nuevo</button>
            </div>

            <!-- Defeat Screen -->
            <div id="battleDefeat" class="battle-defeat" style="display: none;">
                <h3 class="battle-defeat-title">ğŸ’€ DERROTA</h3>
                <p class="battle-defeat-message">Todos tus PokÃ©mon han sido derrotados...</p>
                <div class="battle-defeat-stats">
                    <p>âš”ï¸ PokÃ©mon enemigos derrotados: <span id="enemyDefeated"></span>/3</p>
                </div>
                <button id="battleTryAgain" class="battle-try-again-btn">ğŸ”„ Intentar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Tower Defense Game Modal -->
    <div id="towerDefenseModal" class="td-modal">
        <div class="td-modal-content">
            <span class="td-close">&times;</span>
            <h2 class="td-title">ğŸ—¼ PokÃ©mon Tower Defense</h2>

            <!-- Game Menu -->
            <div id="tdMenu" class="td-menu">
                <p class="td-instructions">
                    Â¡Defiende el camino colocando PokÃ©mon estratÃ©gicamente!
                    <br><br>
                    ğŸ—¼ Coloca torres en las casillas verdes<br>
                    ğŸ’° Gana dinero derrotando enemigos<br>
                    â¤ï¸ No dejes que lleguen al final<br>
                    <br>
                    <strong>Torres Disponibles:</strong><br>
                    ğŸ’§ Squirtle - $50 (RÃ¡pido, DaÃ±o: 10)<br>
                    ğŸ”¥ Charmander - $75 (Fuerte, DaÃ±o: 25)<br>
                    ğŸŒ¿ Bulbasaur - $100 (Ãrea, DaÃ±o: 15)
                </p>
                <button id="startTD" class="start-td-btn">ğŸ—¼ Â¡Comenzar Defensa!</button>
            </div>

            <!-- Game Board -->
            <div id="tdGameBoard" class="td-game-board" style="display: none;">
                <!-- Game Stats -->
                <div class="td-stats">
                    <div class="td-stat">
                        <span class="td-stat-icon">â¤ï¸</span>
                        <span class="td-stat-label">Vidas:</span>
                        <span id="tdLives" class="td-stat-value">20</span>
                    </div>
                    <div class="td-stat">
                        <span class="td-stat-icon">ğŸ’°</span>
                        <span class="td-stat-label">Dinero:</span>
                        <span id="tdMoney" class="td-stat-value">150</span>
                    </div>
                    <div class="td-stat">
                        <span class="td-stat-icon">ğŸŒŠ</span>
                        <span class="td-stat-label">Oleada:</span>
                        <span id="tdWave" class="td-stat-value">1</span>
                    </div>
                </div>

                <!-- Tower Selection -->
                <div class="td-tower-select">
                    <button class="td-tower-btn" data-tower="squirtle" data-cost="50">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png" alt="Squirtle">
                        <span>Squirtle</span>
                        <small>$50</small>
                    </button>
                    <button class="td-tower-btn" data-tower="charmander" data-cost="75">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png" alt="Charmander">
                        <span>Charmander</span>
                        <small>$75</small>
                    </button>
                    <button class="td-tower-btn" data-tower="bulbasaur" data-cost="100">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png" alt="Bulbasaur">
                        <span>Bulbasaur</span>
                        <small>$100</small>
                    </button>
                    <button class="td-start-wave-btn" id="tdStartWave">â–¶ï¸ Iniciar Oleada</button>
                </div>

                <!-- Game Grid -->
                <div id="tdGrid" class="td-grid"></div>

                <!-- Game Controls -->
                <div class="td-controls">
                    <button id="tdPause" class="td-control-btn">â¸ï¸ Pausar</button>
                    <button id="tdSpeed" class="td-control-btn">â© Velocidad: 1x</button>
                </div>
            </div>

            <!-- Victory Screen -->
            <div id="tdVictory" class="td-victory" style="display: none;">
                <h3 class="td-victory-title">ğŸ† Â¡VICTORIA!</h3>
                <p class="td-victory-message">Â¡Has defendido el camino exitosamente!</p>
                <div class="td-victory-stats">
                    <p>ğŸŒŠ Oleadas completadas: <span id="tdFinalWave"></span></p>
                    <p>ğŸ’° Dinero final: <span id="tdFinalMoney"></span></p>
                    <p>â¤ï¸ Vidas restantes: <span id="tdFinalLives"></span></p>
                </div>
                <button id="tdPlayAgain" class="td-play-again-btn">ğŸ”„ Jugar de Nuevo</button>
            </div>

            <!-- Defeat Screen -->
            <div id="tdDefeat" class="td-defeat" style="display: none;">
                <h3 class="td-defeat-title">ğŸ’€ DERROTA</h3>
                <p class="td-defeat-message">Los enemigos han atravesado tus defensas...</p>
                <div class="td-defeat-stats">
                    <p>ğŸŒŠ Oleadas sobrevividas: <span id="tdSurvivedWaves"></span></p>
                    <p>ğŸ‘¾ Enemigos derrotados: <span id="tdEnemiesKilled"></span></p>
                </div>
                <button id="tdTryAgain" class="td-try-again-btn">ğŸ”„ Intentar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- Math Evolution Game Modal -->
    <div id="mathEvoModal" class="mathevo-modal">
        <div class="mathevo-modal-content">
            <span class="mathevo-close">&times;</span>
            <h2 class="mathevo-title">ğŸ§® EvoluciÃ³n MatemÃ¡tica</h2>

            <!-- Game Menu -->
            <div id="mathEvoMenu" class="mathevo-menu">
                <p class="mathevo-instructions">
                    Â¡Resuelve problemas de matemÃ¡ticas para evolucionar tu PokÃ©mon!
                    <br><br>
                    âœ¨ Cada 5 respuestas correctas = Â¡EVOLUCIÃ“N!
                    <br>
                    ğŸ¯ Completa 3 evoluciones para ganar
                </p>

                <div class="mathevo-config">
                    <h3 class="mathevo-config-title">Elige tu PokÃ©mon:</h3>
                    <div class="mathevo-pokemon-select">
                        <button class="mathevo-pokemon-btn" data-pokemon="bulbasaur">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png" alt="Bulbasaur">
                            <span>Bulbasaur</span>
                        </button>
                        <button class="mathevo-pokemon-btn" data-pokemon="charmander">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png" alt="Charmander">
                            <span>Charmander</span>
                        </button>
                        <button class="mathevo-pokemon-btn" data-pokemon="squirtle">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png" alt="Squirtle">
                            <span>Squirtle</span>
                        </button>
                    </div>

                    <h3 class="mathevo-config-title">Dificultad:</h3>
                    <div class="mathevo-difficulty-select">
                        <button class="mathevo-difficulty-btn" data-difficulty="1">
                            <span>ğŸŸ¢ FÃ¡cil</span>
                            <small>NÃºmeros de 1 dÃ­gito (1-9)</small>
                        </button>
                        <button class="mathevo-difficulty-btn" data-difficulty="2">
                            <span>ğŸŸ¡ Medio</span>
                            <small>NÃºmeros de 2 dÃ­gitos (10-99)</small>
                        </button>
                    </div>

                    <h3 class="mathevo-config-title">OperaciÃ³n:</h3>
                    <div class="mathevo-operation-select">
                        <button class="mathevo-operation-btn" data-operation="addition">
                            â• Suma
                        </button>
                        <button class="mathevo-operation-btn" data-operation="subtraction">
                            â– Resta
                        </button>
                        <button class="mathevo-operation-btn" data-operation="mixed">
                            ğŸ”€ Mixto
                        </button>
                    </div>
                </div>

                <button id="startMathEvo" class="start-mathevo-btn" disabled>ğŸ® Â¡Comenzar!</button>
            </div>

            <!-- Game Board -->
            <div id="mathEvoGameBoard" class="mathevo-game-board" style="display: none;">
                <!-- Pokemon Display -->
                <div class="mathevo-pokemon-display">
                    <div class="mathevo-evolution-progress">
                        <div class="evolution-stage" id="mathEvoStage1">
                            <img id="mathEvoSprite1" src="" alt="Stage 1">
                            <span id="mathEvoName1" class="evolution-name"></span>
                        </div>
                        <div class="evolution-arrow">â†’</div>
                        <div class="evolution-stage" id="mathEvoStage2">
                            <img id="mathEvoSprite2" src="" alt="Stage 2">
                            <span id="mathEvoName2" class="evolution-name"></span>
                        </div>
                        <div class="evolution-arrow">â†’</div>
                        <div class="evolution-stage" id="mathEvoStage3">
                            <img id="mathEvoSprite3" src="" alt="Stage 3">
                            <span id="mathEvoName3" class="evolution-name"></span>
                        </div>
                    </div>

                    <div class="mathevo-current-pokemon">
                        <img id="mathEvoCurrentSprite" src="" alt="Current Pokemon" class="current-pokemon-sprite">
                        <h3 id="mathEvoCurrentName" class="current-pokemon-name"></h3>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="mathevo-progress-container">
                    <div class="mathevo-progress-label">
                        <span>Progreso a siguiente evoluciÃ³n:</span>
                        <span id="mathEvoProgressText">0/5</span>
                    </div>
                    <div class="mathevo-progress-bar">
                        <div id="mathEvoProgressFill" class="mathevo-progress-fill"></div>
                    </div>
                </div>

                <!-- Problem Display - Horizontal Layout -->
                <div class="mathevo-problem-area">
                    <!-- Indicador de llevar/pedir prestado -->
                    <div id="mathEvoCarryBorrow" class="mathevo-carry-borrow" style="display: none;">
                        <div class="carry-borrow-indicator">
                            <span id="mathEvoCarryBorrowIcon" class="carry-borrow-icon">ğŸ“</span>
                            <span id="mathEvoCarryBorrowText" class="carry-borrow-text"></span>
                        </div>
                    </div>

                    <!-- Problema horizontal -->
                    <div id="mathEvoProblem" class="mathevo-problem mathevo-problem-horizontal">
                        <div class="mathevo-problem-container">
                            <span id="mathEvoNum1" class="mathevo-number"></span>
                            <span id="mathEvoOperator" class="mathevo-operator"></span>
                            <span id="mathEvoNum2" class="mathevo-number"></span>
                            <span class="mathevo-equals">=</span>
                            <input type="number" id="mathEvoAnswer" class="mathevo-answer-input-inline" placeholder="?" disabled>
                        </div>
                    </div>

                    <!-- ExplicaciÃ³n visual para niÃ±os -->
                    <div id="mathEvoExplanation" class="mathevo-explanation" style="display: none;">
                        <div class="explanation-box">
                            <p id="mathEvoExplanationText" class="explanation-text"></p>
                            <div id="mathEvoVisualAid" class="visual-aid"></div>
                        </div>
                    </div>

                    <div class="mathevo-answer-section">
                        <button id="mathEvoSubmit" class="mathevo-submit-btn">âœ“ Comprobar</button>
                    </div>
                </div>

                <!-- Number Pad -->
                <div class="mathevo-numpad">
                    <button class="mathevo-num-btn" data-num="7">7</button>
                    <button class="mathevo-num-btn" data-num="8">8</button>
                    <button class="mathevo-num-btn" data-num="9">9</button>
                    <button class="mathevo-num-btn" data-num="4">4</button>
                    <button class="mathevo-num-btn" data-num="5">5</button>
                    <button class="mathevo-num-btn" data-num="6">6</button>
                    <button class="mathevo-num-btn" data-num="1">1</button>
                    <button class="mathevo-num-btn" data-num="2">2</button>
                    <button class="mathevo-num-btn" data-num="3">3</button>
                    <button class="mathevo-num-btn" data-num="0">0</button>
                    <button class="mathevo-num-btn mathevo-clear-btn" data-action="clear">âŒ«</button>
                    <button class="mathevo-num-btn mathevo-negative-btn" data-action="negative">-</button>
                </div>

                <!-- Stats -->
                <div class="mathevo-stats">
                    <div class="mathevo-stat-item">
                        <span>âœ… Correctas: <span id="mathEvoCorrect">0</span></span>
                    </div>
                    <div class="mathevo-stat-item">
                        <span>âŒ Incorrectas: <span id="mathEvoWrong">0</span></span>
                    </div>
                    <div class="mathevo-stat-item">
                        <span>ğŸ† Evoluciones: <span id="mathEvoEvolutions">0</span>/3</span>
                    </div>
                </div>
            </div>

            <!-- Evolution Animation Screen -->
            <div id="mathEvoEvolutionScreen" class="mathevo-evolution-screen" style="display: none;">
                <div class="mathevo-evolution-animation">
                    <h2 class="mathevo-evolution-text">âœ¨ Â¡EVOLUCIÃ“N! âœ¨</h2>
                    <div class="mathevo-evolution-sprites">
                        <img id="mathEvoOldSprite" src="" alt="Old" class="evolution-old-sprite">
                        <div class="evolution-sparkles">âœ¨â†’âœ¨</div>
                        <img id="mathEvoNewSprite" src="" alt="New" class="evolution-new-sprite">
                    </div>
                    <p id="mathEvoEvolutionMessage" class="mathevo-evolution-message"></p>
                    <button id="mathEvoContinue" class="mathevo-continue-btn">Â¡Continuar!</button>
                </div>
            </div>

            <!-- Victory Screen -->
            <div id="mathEvoVictory" class="mathevo-victory" style="display: none;">
                <h3 class="mathevo-victory-title">ğŸ‰ Â¡FELICIDADES!</h3>
                <p class="mathevo-victory-message">Â¡Has completado todas las evoluciones!</p>
                <div class="mathevo-final-pokemon">
                    <img id="mathEvoFinalSprite" src="" alt="Final Evolution">
                    <h2 id="mathEvoFinalName" class="mathevo-final-name"></h2>
                </div>
                <div class="mathevo-victory-stats">
                    <p>âœ… Respuestas correctas: <span id="mathEvoFinalCorrect"></span></p>
                    <p>âŒ Respuestas incorrectas: <span id="mathEvoFinalWrong"></span></p>
                    <p>ğŸ¯ PrecisiÃ³n: <span id="mathEvoAccuracy"></span>%</p>
                </div>
                <button id="mathEvoPlayAgain" class="mathevo-play-again-btn">ğŸ”„ Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <!-- YouTube IFrame API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="script.js"></script>
</body>
</html>
